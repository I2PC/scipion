{% extends 'base_flex.html' %}
{% block title %} - Project {{projectName}}{% endblock %}

{% block head %}
<!-- CSS -->
<link href={{css}} rel="stylesheet" type="text/css">
<link href={{messi_css}} rel="stylesheet" type="text/css">
<script src={{jquery_treeview}} type="text/javascript"></script>
<link href="{{jquery_ui}}" rel="stylesheet" type="text/css">
<style>
/* 	section, aside{
		font-size: 0.75em !important;
	} */
</style>

<!-- JS Libs -->
<script src={{jquery_cookie}} type="text/javascript"></script>
<script src={{utils}} type="text/javascript"></script>
<script src={{project_content_utils}} type="text/javascript"></script>
<script src={{graph_utils}} type="text/javascript"></script>
<script type="text/javascript">
	jQuery(function($) {
		// Just call the inner layout once to initialize it. This
		// must happen before the outer layout is initialized. It
		// will be automatically resized when the outer layout is
		// resized.
		$('.layout-inner').layout();

		var outerContainer = $('.layout-outer');

		function layout() {
			outerContainer.layout({resize: false});
		}
		layout();

		$(window).resize(layout);

		
		{% if contentConfig == 'divided' %}
			$('.layout-inner > .north').resizable({
				handles: 's',
				stop: layout
			});
			$('.layout-inner > .center').resizable({
				handles: 's',
				stop: layout
			});
		{% endif %}
		// This selector is changed to only select the west and east
		// components of the outer layout.
		$('.layout-outer > .west').resizable({
			handles: 'e',
			stop: layout
		});
	});
</script>
<script>	
	$(function() {
    	$("#tabs").tabs();
//     	$("#browser").treeview();
    	{% if graphView %}
    		switchGraph()
    	{% endif %}
  	});
</script>
{% endblock %} 

{% block sideLeft %}
<div id="westContainer">
	<div class="viewTree">
		<label>Workflow View: </label>
		<select id="viewsTree" name="viewsTree" onChange="javascript:changeTreeView();">
			{% for choice in choices %}
			 	<option value="{{forloop.counter0}}" {% if forloop.counter0 == choiceSelected %} selected {% endif %}>{{choice}}</option> 
			{% endfor %}
		</select>
	</div> 
	<div class="protFieldsetTree">
	{% include "tree_prot_view.html" %}
	</div>
</div>
{% endblock %} 

{% block contentNorth %}
<span style="float:right;">
	<div id="treeTool">
		<a href="javascript:switchGraph();" class="iconTree">Tree</a>
	</div>
	<div id="listTool" style="display:none;">
		<a href="javascript:switchGraph();" class="iconList">List</a>
	</div>
</span>
<div id="toolbar" style="display: none;">
	<span><a id="editTool" href="" class="iconEdit">Edit</a></span>
	<span><a id="copyTool" href="" class="iconCopy">Copy</a></span>
	<span><a id="deleteTool" href="" class="iconDelete">Delete</a></span>
	<span><a id="browseTool" href="" class="iconBrowse">Browse</a></span>
	<span id="stopTool"><a id="stopTool" href="" class="iconStop">Stop</a></span>
	<span id="analyzeTool"><a id="analyzeTool" href="" class="iconEye">Analyze Results</a></span>
</div>
<div id="runTable">	
	<table id="data" cellspacing="0">
		<tr>
			{% for colName, colWidth in provider.getColumns %}
			<th>{{colName}}</th> {% endfor %}
		</tr>
		{% for obj in provider.getObjects %}
		<tr id="{{obj.getObjId}}" class="runtr" data-name="{{obj.getName}}"
			onclick='javascript:launchToolbarList("{{projectName}}","{{obj.getObjId}}", ($(this)));'>
			<td><a
				href="javascript:popup('/form/?protocolId={{obj.getObjId}}')">
					{% if obj.getObjLabel == '' %} 
						{{obj.getName}}
					{% else %} 
						{{obj.getObjLabel}} 
					{% endif %}
						</a></td>
			<td>{{obj.status.get}}</td>
			<td>{{obj.getElapsedTime}}</td>
		</tr>
		{% endfor %}
	</table>
</div>
<div id="graphActiv" style="display: none;" data-mode="inactive"
	data-time="first" data-project="{{projectName}}" data-option="">
	<h3>History</h3>
</div>
{% endblock %}

{% block contentCenter %}
<div class="tabContaier" id="tabs">
	<ul class="listTabs">
		<li><a href="#tab-data">Data</a></li>
		<li><a href="#tab-summary">Summary</a></li>
	</ul>
	<div id="tab-data" class="tabContents">
		<div id="listEx">
			<ul>
				<li><strong>Input</strong>
					<ul id='protocol_input'></ul>
				</li><br />
				<li><strong>Output</strong>
					<ul id='protocol_output'></ul>
				
			</ul>
		</div>
	</div>
	<div id="tab-summary" class="tabContents">
			<p>No summary information.</p>
	</div>
</div>
{% endblock %}
